#! /usr/bin/env bash

secret_location=ref+op://k8s/tailscale-3d
output=./apps/tailscale/oauth-secret.yaml

kubectl \
  create secret generic operator-oauth \
  --namespace tailscale \
  --dry-run=client \
  --from-literal client_id=$(vals get $secret_location/multipass-k8s-client-id) \
  --from-literal client_secret=$(vals get $secret_location/multipass-k8s-client-secret) \
  --output json \
  | kubeseal --format yaml \
  >$output

echo "secret file written to : $output"


